angular.module("fluro.auth",[]),angular.module("fluro.auth").controller("AuthModalController",function($scope,$rootScope,FluroAuthService){$scope.cancel=function(){$rootScope.user=null,$scope.$dismiss()},$scope.submit=function(email,password){var req=FluroAuthService.login(email,password);req.error(function(){$rootScope.user=null}),req.success(function(user){$scope.$close(user)})}}),angular.module("fluro.auth").service("AuthModalService",function($modal,$rootScope){return function(){var instance=$modal.open({templateUrl:"fluro/auth/authModal.html",controller:"AuthModalController"});return instance.result.then(function(user){console.log("Login result",user),$rootScope.user=user})}}),angular.module("fluro.auth").service("FluroAuthService",function($rootScope,$http,FluroConfig){var controller={};return controller.login=function(email,password){return $http.post(FluroConfig.fluro_url+"/auth/login",{username:email,password:password})},controller.getSession=function(){return $http.get(FluroConfig.fluro_url+"/auth/session")},controller.logout=function(){var url=FluroConfig.fluro_url+"/auth/logout";return $http.get(url)},controller}),angular.module("fluro.auth").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("fluro/auth/authModal.html",'<div class=fluro-auth-modal><div class=fluro-modal-header><h1>Please Sign In</h1></div><div class=fluro-login-form><form novalidate name=loginForm ng-submit="submit(_email, _password)"><div class=form-element><div class="input-group with-icon"><input type=email id=email name=email ng-required placeholder="Email Address" ng-model=_email><div class=input-icon><i class="fa fa-envelope"></i></div></div></div><div class=form-element><div class="input-group with-icon"><input type=password id=password name=password ng-required placeholder=Password ng-model=_password><div class=input-icon><i class="fa fa-lock"></i></div></div></div><div class=form-actions><button class="btn btn-default" type=submit>Login now</button></div></form></div></div>')}]);